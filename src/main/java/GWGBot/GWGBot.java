package GWGBot;

import javax.security.auth.login.LoginException;

import net.dv8tion.jda.api.JDABuilder;
import net.dv8tion.jda.api.entities.Member;
import net.dv8tion.jda.api.entities.Message;
import net.dv8tion.jda.api.entities.TextChannel;
import net.dv8tion.jda.api.events.guild.member.GuildMemberJoinEvent;
import net.dv8tion.jda.api.events.message.MessageReceivedEvent;
import net.dv8tion.jda.api.hooks.ListenerAdapter;
import net.dv8tion.jda.api.requests.GatewayIntent;

public class GWGBot extends ListenerAdapter {


    public static void main(String[] args) {

    	JDABuilder jda = JDABuilder.createDefault(Constants.BOT_TOKEN);
    	jda.addEventListeners(new GWGBot());
    	jda.enableIntents(GatewayIntent.GUILD_MEMBERS);
    	
    	try {
			jda.build();
		} catch (LoginException e) {
			e.printStackTrace();
		}
    	
    }
    
    @Override
    public void onMessageReceived(MessageReceivedEvent event){
    	
    	Message msg = event.getMessage();
    	
    	if(msg.getContentRaw().startsWith(Constants.PREFIX + "ping")) {
    		new Ping(msg);
    	}
    	
    	
    }
    	
    @Override
    public void onGuildMemberJoin(GuildMemberJoinEvent event) {
    	TextChannel welcomeChannel = event.getGuild().getTextChannelById(Constants.WELCOME_CHANNEL_ID);
    	Member member = event.getMember();
    	new Welcome(welcomeChannel, member);
    	// https://autocode.com/tools/discord/embed-builder/?embed=JTdCJTIyY2hhbm5lbF9pZCUyMiUzQSUyMiU2MCUyNCU3QmNvbnRleHQucGFyYW1zLmV2ZW50LmNoYW5uZWxfaWQlN0QlNjAlMjIlMkMlMjJjb250ZW50JTIyJTNBJTIyJTIyJTJDJTIydHRzJTIyJTNBZmFsc2UlMkMlMjJlbWJlZHMlMjIlM0ElNUIlN0IlMjJ0eXBlJTIyJTNBJTIycmljaCUyMiUyQyUyMnRpdGxlJTIyJTNBJTIyJTYwV2VsY29tZSUyMHRvJTIwdGhlJTIwc2VydmVyJTIwJTNDJTQwNDM0MzQzNCUzRSU2MCUyMiUyQyUyMmRlc2NyaXB0aW9uJTIyJTNBJTIyJTYwJTVDbi0lMjBSZWFkJTIwdGhlJTIwc2VydmVyJTIwcnVsZXMlMjAlM0MlMjNydWxlcyUzRSU1Q24tJTIwSW50cm9kdWNlJTIweW91cnNlbGYlMjAlM0MlMjNpbnRyb2R1Y3Rpb24lNUNuLSUyMEdldCUyMHNvbWUlMjByb2xlcyUyMGF0JTIwJTNDJTIzc2VsZnJvbGVzJTNFJTVDbiU2MCUyMiUyQyUyMmNvbG9yJTIyJTNBJTIyMHgwMEZGRkYlMjIlN0QlNUQlMkMlMjJfZmlsZSUyMiUzQSUyMmRhdGElM0FpbWFnZSUyRnBuZyUzQmJhc2U2NCUyQ2lWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFTd0FBQUNXQ0FZQUFBQmtXN1hTQUFBQUFYTlNSMElBcnM0YzZRQUFCR0pKUkVGVWVGN3QxQUVKQUFBTUFzSFp2JTJGUnlQTndTeURuY09RSUVDRVFFRnNrcEpnRUNCTTVnZVFJQ0JESUNCaXRUbGFBRUNCZ3NQMENBUUViQVlHV3FFcFFBQVlQbEJ3Z1F5QWdZckV4VmdoSWdZTEQ4QUFFQ0dRR0RsYWxLVUFJRURKWWZJRUFnSTJDd01sVUpTb0NBd2ZJREJBaGtCQXhXcGlwQkNSQXdXSDZBQUlHTWdNSEtWQ1VvQVFJR3l3OFFJSkFSTUZpWnFnUWxRTUJnJTJCUUVDQkRJQ0JpdFRsYUFFQ0Jnc1AwQ0FRRWJBWUdXcUVwUUFBWVBsQndnUXlBZ1lyRXhWZ2hJZ1lMRDhBQUVDR1FHRGxhbEtVQUlFREpZZklFQWdJMkN3TWxVSlNvQ0F3ZklEQkFoa0JBeFdwaXBCQ1JBd1dINkFBSUdNZ01IS1ZDVW9BUUlHeXc4UUlKQVJNRmlacWdRbFFNQmclMkJRRUNCRElDQml0VGxhQUVDQmdzUDBDQVFFYkFZR1dxRXBRQUFZUGxCd2dReUFnWXJFeFZnaElnWUxEOEFBRUNHUUdEbGFsS1VBSUVESllmSUVBZ0kyQ3dNbFVKU29DQXdmSURCQWhrQkF4V3BpcEJDUkF3V0g2QUFJR01nTUhLVkNVb0FRSUd5dzhRSUpBUk1GaVpxZ1FsUU1CZyUyQlFFQ0JESUNCaXRUbGFBRUNCZ3NQMENBUUViQVlHV3FFcFFBQVlQbEJ3Z1F5QWdZckV4VmdoSWdZTEQ4QUFFQ0dRR0RsYWxLVUFJRURKWWZJRUFnSTJDd01sVUpTb0NBd2ZJREJBaGtCQXhXcGlwQkNSQXdXSDZBQUlHTWdNSEtWQ1VvQVFJR3l3OFFJSkFSTUZpWnFnUWxRTUJnJTJCUUVDQkRJQ0JpdFRsYUFFQ0Jnc1AwQ0FRRWJBWUdXcUVwUUFBWVBsQndnUXlBZ1lyRXhWZ2hJZ1lMRDhBQUVDR1FHRGxhbEtVQUlFREpZZklFQWdJMkN3TWxVSlNvQ0F3ZklEQkFoa0JBeFdwaXBCQ1JBd1dINkFBSUdNZ01IS1ZDVW9BUUlHeXc4UUlKQVJNRmlacWdRbFFNQmclMkJRRUNCRElDQml0VGxhQUVDQmdzUDBDQVFFYkFZR1dxRXBRQUFZUGxCd2dReUFnWXJFeFZnaElnWUxEOEFBRUNHUUdEbGFsS1VBSUVESllmSUVBZ0kyQ3dNbFVKU29DQXdmSURCQWhrQkF4V3BpcEJDUkF3V0g2QUFJR01nTUhLVkNVb0FRSUd5dzhRSUpBUk1GaVpxZ1FsUU1CZyUyQlFFQ0JESUNCaXRUbGFBRUNCZ3NQMENBUUViQVlHV3FFcFFBQVlQbEJ3Z1F5QWdZckV4VmdoSWdZTEQ4QUFFQ0dRR0RsYWxLVUFJRURKWWZJRUFnSTJDd01sVUpTb0NBd2ZJREJBaGtCQXhXcGlwQkNSQXdXSDZBQUlHTWdNSEtWQ1VvQVFJR3l3OFFJSkFSTUZpWnFnUWxRTUJnJTJCUUVDQkRJQ0JpdFRsYUFFQ0Jnc1AwQ0FRRWJBWUdXcUVwUUFBWVBsQndnUXlBZ1lyRXhWZ2hJZ1lMRDhBQUVDR1FHRGxhbEtVQUlFREpZZklFQWdJMkN3TWxVSlNvQ0F3ZklEQkFoa0JBeFdwaXBCQ1JBd1dINkFBSUdNZ01IS1ZDVW9BUUlHeXc4UUlKQVJNRmlacWdRbFFNQmclMkJRRUNCRElDQml0VGxhQUVDQmdzUDBDQVFFYkFZR1dxRXBRQUFZUGxCd2dReUFnWXJFeFZnaElnWUxEOEFBRUNHUUdEbGFsS1VBSUVESllmSUVBZ0kyQ3dNbFVKU29DQXdmSURCQWhrQkF4V3BpcEJDUkF3V0g2QUFJR01nTUhLVkNVb0FRSUd5dzhRSUpBUk1GaVpxZ1FsUU1CZyUyQlFFQ0JESUNCaXRUbGFBRUNCZ3NQMENBUUViQVlHV3FFcFFBZ1FkV01RQ1g0eVc5b3dBQUFBQkpSVTVFcmtKZ2dnJTNEJTNEJTIyJTdE
    }
    
}